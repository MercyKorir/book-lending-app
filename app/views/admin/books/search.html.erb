<div class="max-w-3xl mx-auto">
  <h1 class="text-2xl font-bold mb-6">Add Book from Open Library</h1>
  
  <% if @book.errors.any? %>
    <div class="alert alert-error mb-4">
      <h2 class="font-bold"><%= pluralize(@book.errors.count, "error") %> prohibited this book from being saved:</h2>
      <ul>
        <% @book.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <%= form_with url: search_admin_books_path, method: :get, class: "space-y-4", local: true do |f| %>
    <div class="form-group">
      <%= f.label :isbn, "Search by ISBN", class: "block text-sm font-medium text-gray-700" %>
      <%= f.text_field :isbn, value: params[:isbn], 
           class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",
           placeholder: "Enter ISBN number" %>
    </div>

    <div class="flex gap-4">
      <%= f.submit "Search Open Library", 
           class: "btn-primary bg-indigo-600 text-white px-6 py-2 rounded-md" %>
           
      <button type="button" 
              onclick="document.getElementById('manual-entry').classList.toggle('hidden')"
              class="btn-secondary bg-gray-100 text-gray-700 px-6 py-2 rounded-md">
        Manual Entry
      </button>
    </div>
  <% end %>

  <% if @book.title.present? %>
    <div class="mt-8">
      <h2 class="text-xl font-bold mb-4">Book Details</h2>
      <%= form_with model: [:admin, @book], local: true, class: "space-y-4" do |f| %>
        <div class="form-group">
          <%= f.label :title, class: "block text-sm font-medium text-gray-700" %>
          <%= f.text_field :title, class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm" %>
        </div>

        <div class="form-group">
          <%= f.label :author, class: "block text-sm font-medium text-gray-700" %>
          <%= f.text_field :author, class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm" %>
        </div>

        <div class="form-group">
          <%= f.label :isbn, class: "block text-sm font-medium text-gray-700" %>
          <%= f.text_field :isbn, class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm" %>
        </div>

        <div class="form-group">
          <%= f.label :cover_url, class: "block text-sm font-medium text-gray-700" %>
          <%= f.text_field :cover_url, class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm" %>
        </div>

        <div class="form-group">
          <%= f.label :synopsis, class: "block text-sm font-medium text-gray-700" %>
          <%= f.text_area :synopsis, class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm" %>
        </div>

        <%= f.hidden_field :visible, value: true %>

        <%= f.submit "Create Book", class: "btn-primary bg-indigo-600 text-white px-6 py-2 rounded-md" %>
      <% end %>
    </div>
  <% end %>

  <div class="bg-gray-50 p-4 rounded-lg mt-4 hidden" id="manual-entry">
    <h3 class="text-lg font-medium mb-4">Create Manually</h3>
    <%= form_with model: [:admin, Book.new], local: true do |f| %>
      <div class="form-group">
        <%= f.label :title, class: "block text-sm font-medium text-gray-700" %>
        <%= f.text_field :title, class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm" %>
      </div>

      <div class="form-group">
        <%= f.label :author, class: "block text-sm font-medium text-gray-700" %>
        <%= f.text_field :author, class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm" %>
      </div>

      <div class="form-group">
        <%= f.label :isbn, class: "block text-sm font-medium text-gray-700" %>
        <%= f.text_field :isbn, class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm" %>
      </div>

      <%= f.hidden_field :visible, value: true %>

      <%= f.submit "Create Book", class: "btn-primary bg-indigo-600 text-white px-6 py-2 rounded-md mt-4" %>
    <% end %>
  </div>
</div>